import json

class Author():
    objectivity = None
    openness = None
    taxonomies = ()
    personality = ()
    no_data = False

    def __init__(self, name):
        self.name = name

    def __repr__(self):
        return "<Author {}\n  objectivity:{}\n  personality:{}\n  taxonomies:{}>".format(self.name, self.objectivity, self.personality, self.taxonomies)

    def build_sample_data(self):
        self.personality = {'word_count': 842, 'processed_language': 'en', 'needs': [{'trait_id': 'need_challenge', 'name': 'Challenge', 'category': 'needs', 'percentile': 0.049736682502987184}, {'trait_id': 'need_closeness', 'name': 'Closeness', 'category': 'needs', 'percentile': 0.16224708434479074}, {'trait_id': 'need_curiosity', 'name': 'Curiosity', 'category': 'needs', 'percentile': 0.06265381910160911}, {'trait_id': 'need_excitement', 'name': 'Excitement', 'category': 'needs', 'percentile': 0.06002322156152973}, {'trait_id': 'need_harmony', 'name': 'Harmony', 'category': 'needs', 'percentile': 0.0067186701289772555}, {'trait_id': 'need_ideal', 'name': 'Ideal', 'category': 'needs', 'percentile': 0.02246826370700772}, {'trait_id': 'need_liberty', 'name': 'Liberty', 'category': 'needs', 'percentile': 0.003520552136251076}, {'trait_id': 'need_love', 'name': 'Love', 'category': 'needs', 'percentile': 0.10178981173641055}, {'trait_id': 'need_practicality', 'name': 'Practicality', 'category': 'needs', 'percentile': 0.0439021830731014}, {'trait_id': 'need_self_expression', 'name': 'Self-expression', 'category': 'needs', 'percentile': 0.01601559725902768}, {'trait_id': 'need_stability', 'name': 'Stability', 'category': 'needs', 'percentile': 0.5260949802932358}, {'trait_id': 'need_structure', 'name': 'Structure', 'category': 'needs', 'percentile': 0.733257251891287}], 'personality': [{'trait_id': 'big5_openness', 'name': 'Openness', 'category': 'personality', 'percentile': 0.9980267265866805, 'children': [{'trait_id': 'facet_adventurousness', 'name': 'Adventurousness', 'category': 'personality', 'percentile': 0.7465477548766535}, {'trait_id': 'facet_artistic_interests', 'name': 'Artistic interests', 'category': 'personality', 'percentile': 0.6408433672816773}, {'trait_id': 'facet_emotionality', 'name': 'Emotionality', 'category': 'personality', 'percentile': 0.24383183002421654}, {'trait_id': 'facet_imagination', 'name': 'Imagination', 'category': 'personality', 'percentile': 0.4660978172469331}, {'trait_id': 'facet_intellect', 'name': 'Intellect', 'category': 'personality', 'percentile': 0.9707009756059919}, {'trait_id': 'facet_liberalism', 'name': 'Authority-challenging', 'category': 'personality', 'percentile': 0.9242635724536574}]}, {'trait_id': 'big5_conscientiousness', 'name': 'Conscientiousness', 'category': 'personality', 'percentile': 0.9637271161110009, 'children': [{'trait_id': 'facet_achievement_striving', 'name': 'Achievement striving', 'category': 'personality', 'percentile': 0.9387320573003071}, {'trait_id': 'facet_cautiousness', 'name': 'Cautiousness', 'category': 'personality', 'percentile': 0.9246459651624412}, {'trait_id': 'facet_dutifulness', 'name': 'Dutifulness', 'category': 'personality', 'percentile': 0.8716978206257466}, {'trait_id': 'facet_orderliness', 'name': 'Orderliness', 'category': 'personality', 'percentile': 0.31311906831811265}, {'trait_id': 'facet_self_discipline', 'name': 'Self-discipline', 'category': 'personality', 'percentile': 0.7631001321311754}, {'trait_id': 'facet_self_efficacy', 'name': 'Self-efficacy', 'category': 'personality', 'percentile': 0.9271464567573235}]}, {'trait_id': 'big5_extraversion', 'name': 'Extraversion', 'category': 'personality', 'percentile': 0.9358256278870629, 'children': [{'trait_id': 'facet_activity_level', 'name': 'Activity level', 'category': 'personality', 'percentile': 0.7613828983454805}, {'trait_id': 'facet_assertiveness', 'name': 'Assertiveness', 'category': 'personality', 'percentile': 0.9881140134985196}, {'trait_id': 'facet_cheerfulness', 'name': 'Cheerfulness', 'category': 'personality', 'percentile': 0.11458232269003227}, {'trait_id': 'facet_excitement_seeking', 'name': 'Excitement-seeking', 'category': 'personality', 'percentile': 0.2985864744843998}, {'trait_id': 'facet_friendliness', 'name': 'Outgoing', 'category': 'personality', 'percentile': 0.36081947023675387}, {'trait_id': 'facet_gregariousness', 'name': 'Gregariousness', 'category': 'personality', 'percentile': 0.25501323447225166}]}, {'trait_id': 'big5_agreeableness', 'name': 'Agreeableness', 'category': 'personality', 'percentile': 0.5388181317462555, 'children': [{'trait_id': 'facet_altruism', 'name': 'Altruism', 'category': 'personality', 'percentile': 0.9077242007363344}, {'trait_id': 'facet_cooperation', 'name': 'Cooperation', 'category': 'personality', 'percentile': 0.4250532324056621}, {'trait_id': 'facet_modesty', 'name': 'Modesty', 'category': 'personality', 'percentile': 0.20826199100622939}, {'trait_id': 'facet_morality', 'name': 'Uncompromising', 'category': 'personality', 'percentile': 0.47324384484598897}, {'trait_id': 'facet_sympathy', 'name': 'Sympathy', 'category': 'personality', 'percentile': 0.9983767008859471}, {'trait_id': 'facet_trust', 'name': 'Trust', 'category': 'personality', 'percentile': 0.8961060712819526}]}, {'trait_id': 'big5_neuroticism', 'name': 'Emotional range', 'category': 'personality', 'percentile': 0.9721068515427786, 'children': [{'trait_id': 'facet_anger', 'name': 'Fiery', 'category': 'personality', 'percentile': 0.2624270309760566}, {'trait_id': 'facet_anxiety', 'name': 'Prone to worry', 'category': 'personality', 'percentile': 0.2542412191081962}, {'trait_id': 'facet_depression', 'name': 'Melancholy', 'category': 'personality', 'percentile': 0.4813367562243084}, {'trait_id': 'facet_immoderation', 'name': 'Immoderation', 'category': 'personality', 'percentile': 0.03565409107587458}, {'trait_id': 'facet_self_consciousness', 'name': 'Self-consciousness', 'category': 'personality', 'percentile': 0.19097096246290035}, {'trait_id': 'facet_vulnerability', 'name': 'Susceptible to stress', 'category': 'personality', 'percentile': 0.04605075209392173}]}], 'warnings': [], 'values': [{'trait_id': 'value_conservation', 'name': 'Conservation', 'category': 'values', 'percentile': 0.19652770541878317}, {'trait_id': 'value_openness_to_change', 'name': 'Openness to change', 'category': 'values', 'percentile': 0.21616178438963657}, {'trait_id': 'value_hedonism', 'name': 'Hedonism', 'category': 'values', 'percentile': 0.0449944253619155}, {'trait_id': 'value_self_enhancement', 'name': 'Self-enhancement', 'category': 'values', 'percentile': 0.04823787940912444}, {'trait_id': 'value_self_transcendence', 'name': 'Self-transcendence', 'category': 'values', 'percentile': 0.005849063539250354}]} 
        self.taxonomies = {'hobbies and interests': 1}
        self.objectivity = 1.64927

    @classmethod
    def fromCache(cls, cache):
        print(cache)
        ret = cls(cache.name)
        ret.personality = json.loads(cache.personality)                                      
        ret.taxonomies = json.loads(cache.taxonomies)                                                                                                                   
        ret.objectivity = cache.objectivity                                                                                                                             
        ret.openness = cache.openness
        return ret
